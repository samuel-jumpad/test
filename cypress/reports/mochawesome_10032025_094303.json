{
  "stats": {
    "suites": 1,
    "tests": 1,
    "passes": 0,
    "pending": 0,
    "failures": 1,
    "start": "2025-10-03T12:41:09.040Z",
    "end": "2025-10-03T12:43:03.186Z",
    "duration": 114146,
    "testsRegistered": 1,
    "passPercent": 0,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "0c94647e-4973-4b46-8c30-58eedbe22826",
      "title": "",
      "fullFile": "cypress\\e2e\\chat\\send-message-to-old-agent.cy.js",
      "file": "cypress\\e2e\\chat\\send-message-to-old-agent.cy.js",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "66305d14-e4b4-4801-ae99-fad3920a4994",
          "title": "Acessar agente antigo e enviar um chat",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "deve acessar chat antigo de um agente e enviar um chat",
              "fullTitle": "Acessar agente antigo e enviar um chat deve acessar chat antigo de um agente e enviar um chat",
              "timedOut": null,
              "duration": 59614,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Estrat√©gia 1: Tentar encontrar bot√£o Agentes na navega√ß√£o\ncy.get('body').then($body => {\n  // Procurar por bot√£o ou link com texto \"Agentes\"\n  const agentesButton = $body.find('button:contains(\"Agentes\"), a:contains(\"Agentes\"), [role=\"button\"]:contains(\"Agentes\")');\n  if (agentesButton.length > 0) {\n    cy.log('‚úÖ Encontrado bot√£o Agentes');\n    cy.wrap(agentesButton.first()).should('be.visible').click();\n    cy.wait(2000);\n  } else {\n    cy.log('‚ö†Ô∏è Bot√£o Agentes n√£o encontrado, tentando navega√ß√£o direta...');\n    // Estrat√©gia 2: Navega√ß√£o direta para p√°gina de agentes\n    cy.url().then(currentUrl => {\n      const baseUrl = currentUrl.split('/').slice(0, 3).join('/');\n      // Tentar diferentes poss√≠veis URLs para agentes\n      const possibleUrls = [`${baseUrl}/agents`, `${baseUrl}/agentes`, `${baseUrl}/dashboard/agents`, `${baseUrl}/dashboard/agentes`];\n      let navigated = false;\n      for (let i = 0; i < possibleUrls.length && !navigated; i++) {\n        cy.log(`Tentando navegar para: ${possibleUrls[i]}`);\n        cy.visit(possibleUrls[i], {\n          failOnStatusCode: false\n        });\n        cy.wait(3000);\n        cy.url().then(newUrl => {\n          if (newUrl.includes('agents') || newUrl.includes('agentes')) {\n            cy.log(`‚úÖ Navega√ß√£o bem-sucedida para: ${newUrl}`);\n            navigated = true;\n          }\n        });\n      }\n    });\n  }\n});\n// Aguardar carregamento da p√°gina de agentes\n// cy.wait(3000);\n// Verificar se estamos na p√°gina correta\ncy.url().then(url => {\n  if (!url.includes('agents') && !url.includes('agentes') && !url.includes('assistants')) {\n    cy.log('‚ö†Ô∏è Navegando para p√°gina de agentes...');\n    // Tentar navegar diretamente para a p√°gina de agentes\n    const baseUrl = url.split('/').slice(0, 3).join('/');\n    const agentsUrl = `${baseUrl}/agents`;\n    cy.visit(agentsUrl, {\n      failOnStatusCode: false\n    });\n    cy.wait(5000);\n  }\n});\n// Clicar em \"Meus Agentes\"\ncy.log('üîç Procurando \"Meus Agentes\"...');\ncy.get('body').then($body => {\n  // Procurar por \"Meus Agentes\" com seletores simples\n  const meusAgentesSelectors = ['button:contains(\"Meus Agentes\")', 'a:contains(\"Meus Agentes\")', 'div:contains(\"Meus Agentes\")', '*:contains(\"Meus Agentes\")', 'button:contains(\"Meus\")', 'a:contains(\"Meus\")', 'div:contains(\"Meus\")'];\n  let found = false;\n  // Tentar cada seletor CSS apenas\n  for (let selector of meusAgentesSelectors) {\n    if ($body.find(selector).length > 0) {\n      cy.log(`‚úÖ Encontrado \"Meus Agentes\"`);\n      cy.get(selector).first().should('be.visible').click();\n      cy.wait(2000);\n      found = true;\n      break;\n    }\n  }\n  if (!found) {\n    cy.log('‚úÖ Continuando para criar novo agente');\n  }\n});\n// Digita o nome no campo de busca - com fallback\ncy.log('üîç Procurando campo de busca...');\ncy.get('body').then($body => {\n  const selectorsBusca = ['input[type=\"search\"]', 'input[placeholder*=\"Buscar\"]', 'input[placeholder*=\"buscar\"]', 'input[placeholder*=\"nome\"]', 'input[placeholder*=\"search\"]', '[data-testid*=\"search\"]', '[class*=\"search\"] input'];\n  let campoBuscaEncontrado = false;\n  for (const selector of selectorsBusca) {\n    if ($body.find(selector).length > 0) {\n      cy.log(`‚úÖ Campo de busca encontrado: ${selector}`);\n      cy.get(selector).first().should('be.visible').clear().type('Cypress', {\n        delay: 100\n      });\n      campoBuscaEncontrado = true;\n      break;\n    }\n  }\n  if (!campoBuscaEncontrado) {\n    cy.log('‚ö†Ô∏è Campo de busca n√£o encontrado, tentando input gen√©rico...');\n    if ($body.find('input[type=\"text\"]').length > 0) {\n      cy.get('input[type=\"text\"]').first().should('be.visible').clear().type('Cypress', {\n        delay: 350\n      });\n    } else {\n      cy.log('‚ö†Ô∏è Nenhum campo de busca dispon√≠vel, continuando sem busca...');\n    }\n  }\n});\n// Aguarda a tabela carregar \n//cy.wait(5000);\n// ===== CLICAR NO BOT√ÉO TESTAR =====\ncy.log('üîç Procurando bot√£o \"Testar\"...');\ncy.wait(5000); // Aguardar p√°gina carregar\n// Estrat√©gia mais robusta para encontrar o bot√£o Testar\ncy.get('body').then($body => {\n  // Estrat√©gia 1: Buscar por texto \"Testar\" com m√∫ltiplos seletores\n  const testarSelectors = ['button:contains(\"Testar\")', 'a:contains(\"Testar\")', '[role=\"button\"]:contains(\"Testar\")', 'div:contains(\"Testar\")', '*:contains(\"Testar\")'];\n  let testarEncontrado = false;\n  for (const selector of testarSelectors) {\n    if ($body.find(selector).length > 0) {\n      cy.log(`‚úÖ Bot√£o Testar encontrado: ${selector}`);\n      cy.get(selector).first().scrollIntoView().wait(1000).click({\n        force: true\n      });\n      testarEncontrado = true;\n      break;\n    }\n  }\n  // Estrat√©gia 2: Buscar por √≠cone sparkles\n  if (!testarEncontrado && $body.find('button svg[class*=\"sparkles\"]').length > 0) {\n    cy.log('‚úÖ Bot√£o Testar encontrado por √≠cone sparkles');\n    cy.get('button svg[class*=\"sparkles\"]').parent().first().scrollIntoView().wait(1000).click({\n      force: true\n    });\n    testarEncontrado = true;\n  }\n  // Estrat√©gia 3: Buscar qualquer bot√£o na linha da tabela\n  if (!testarEncontrado && $body.find('table tbody tr button').length > 0) {\n    cy.log('‚úÖ Bot√µes encontrados na tabela, clicando no primeiro');\n    cy.get('table tbody tr button').first().scrollIntoView().wait(1000).click({\n      force: true\n    });\n    testarEncontrado = true;\n  }\n  // Estrat√©gia 4: Buscar por qualquer elemento clic√°vel\n  if (!testarEncontrado) {\n    cy.log('‚ö†Ô∏è Bot√£o Testar n√£o encontrado, tentando primeiro bot√£o dispon√≠vel');\n    cy.get('button').first().scrollIntoView().wait(1000).click({\n      force: true\n    });\n  }\n});\ncy.wait(5000);\n// ===== FASE 4: DIGITAR MENSAGEM =====\n// Clica e digita no campo de mensagem\n// op√ß√£o A ‚Äî dentro do dialog aberto + form do chat\nconst CHAT_INPUT_XPATH = '//div[@role=\"dialog\" and @data-state=\"open\"]//form[@id=\"chat-message-input-form\"]//div[@role=\"textbox\" and @contenteditable=\"true\"]';\ncy.xpath(CHAT_INPUT_XPATH, {\n  timeout: 20000\n}).should('exist').then($els => {\n  const $visible = $els.filter(':visible'); // garante 1 s√≥\n  expect($visible.length, 'input vis√≠vel √∫nico').to.eq(1);\n  cy.wrap($visible[0]).scrollIntoView().click({\n    force: true\n  }).type('Ol√°, esta √© uma mensagem de teste', {\n    delay: 100\n  });\n});\n//clicar em enviar\ncy.xpath('//form[@id=\"chat-message-input-form\"]//button[.//svg]').last().scrollIntoView().should('be.visible').click({\n  force: true\n});\ncy.xpath('//div[@role=\"dialog\" and @data-state=\"open\"]//button//*[name()=\"svg\" and contains(@class,\"lucide-x\")]').should('be.visible').click({\n  force: true\n});\ncy.wait(5000);",
              "err": {
                "message": "AssertionError: Timed out retrying after 20000ms: Expected to find element: `//div[@role=\"dialog\" and @data-state=\"open\"]//form[@id=\"chat-message-input-form\"]//div[@role=\"textbox\" and @contenteditable=\"true\"]`, but never found it.",
                "estack": "AssertionError: Timed out retrying after 20000ms: Expected to find element: `//div[@role=\"dialog\" and @data-state=\"open\"]//form[@id=\"chat-message-input-form\"]//div[@role=\"textbox\" and @contenteditable=\"true\"]`, but never found it.\n    at Context.eval (webpack://cypress-automation/./cypress/e2e/chat/send-message-to-old-agent.cy.js:218:3)",
                "diff": null
              },
              "uuid": "65c991a0-4178-437c-a3cb-8a28ec68bfd2",
              "parentUUID": "66305d14-e4b4-4801-ae99-fad3920a4994",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [],
          "failures": [
            "65c991a0-4178-437c-a3cb-8a28ec68bfd2"
          ],
          "pending": [],
          "skipped": [],
          "duration": 59614,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.0.1"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "cypress/reports",
        "overwrite": false,
        "html": true,
        "json": true,
        "timestamp": "mmddyyyy_HHMMss"
      },
      "version": "6.3.0"
    }
  }
}